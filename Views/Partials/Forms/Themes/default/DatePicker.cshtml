@using System.Globalization
@using Umbraco.Forms.Core
@using Umbraco.Forms.Mvc
@{
    var datePickerYearRange = Configuration.GetSetting("DatePickerYearRange");
    if (string.IsNullOrEmpty(datePickerYearRange))
    {
        datePickerYearRange = "10";
    }

    Html.AddFormThemeCssFile("~/App_Plugins/UmbracoForms/Assets/pikaday/pikaday.css");
    Html.AddFormThemeScriptFile(null, "~/App_Plugins/UmbracoForms/Assets/moment/min/moment-with-locales.min.js");
    Html.AddFormThemeScriptFile(null, "~/App_Plugins/UmbracoForms/Assets/pikaday/pikaday.js");
    Html.AddFormThemeScriptFile(null, "~/App_Plugins/UmbracoForms/Assets/datepicker.init.js");

    //only render the script block below one time per page
    var alreadyRendered = Context.Items.Contains("__formDatePickerRendered");
    Context.Items["__formDatePickerRendered"] = true;
}

@if (!alreadyRendered)
{
    <div id="umbraco-forms-date-picker-config"
         style="display: none"
         data-name="@CultureInfo.CurrentUICulture.Name"
         data-year-range="@datePickerYearRange"
         data-previous-month="<<"
         data-next-month=">>"
         data-months="@string.Join(",", CultureInfo.CurrentCulture.DateTimeFormat.MonthNames)"
         data-weekdays="@string.Join(",", CultureInfo.CurrentCulture.DateTimeFormat.DayNames)"
         data-weekdays-short="@string.Join(",", CultureInfo.CurrentCulture.DateTimeFormat.AbbreviatedDayNames)"></div>
}
